syntax = "proto3";

// package helloworld;

service Miner {
	rpc BroadcastBlock (Block) returns (Success) {}
	rpc BroadcastTransaction (Transaction) returns (Success) {}
	rpc GetAddr (AddrRequest) returns (AddrResponse) {}
	rpc GetTransaction (TransactionRequest) returns (Transaction) {}
	rpc GetBlock (BlockRequest) returns (Block) {}
	rpc GetHeartbeat (EmptyRequest) returns (Success) {}
}

message EmptyRequest {
}

message Success {
	bool success = 1;
	string message = 2;
}

message Block {
	bytes raw_data = 1;
}

message Transaction {
	bytes raw_data = 1;
}

message AddrRequest {
	int32 num_requested = 1;
}

message AddrResponse {
	repeated string peer = 1;
}

message TransactionRequest {
	string publickey = 1;
}

message BlockRequest {
	// if not sent, then the latest block is requested
	int32 block_number = 1;
}

